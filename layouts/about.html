{{ define "main" }}
<div class="container">
  <header style="margin-bottom: 3rem">
    <h1 class="site-title">About Miguel</h1>
    <p
      class="site-bio"
      style="margin-top: 1rem; text-align: justify; max-width: none"
    >
      {{ site.Params.aboutBio }}
    </p>
  </header>

  <!-- About Section with Cards -->
  <section>
    <div class="section-header">
      <h2 class="section-title">Background</h2>
    </div>
    <div class="grid">
      {{ range first 3 site.Data.aboutsections }}
      <article class="card">
        <h3 class="card-title">{{ .title }}</h3>
        {{ with .items }}
        <div
          style="
            margin-top: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
          "
        >
          {{ range . }}
          <div
            style="
              display: flex;
              align-items: flex-start;
              gap: 0.75rem;
              padding: 0.75rem;
              border-radius: 0.5rem;
              font-size: 0.875rem;
              color: var(--color-text-light);
            "
          >
            <span
              style="
                flex-shrink: 0;
                color: #10b981;
                font-size: 1.25rem;
                line-height: 1;
              "
              >✓</span
            >
            <span style="line-height: 1.5">{{ . }}</span>
          </div>
          {{ end }}
        </div>
        {{ end }}
      </article>
      {{ end }}
    </div>
  </section>

  <!-- Additional Info -->
  <section style="margin-top: 3rem">
    <div class="grid">
      {{ range after 3 site.Data.aboutsections }}
      <article class="card">
        <h3 class="card-title">{{ .title }}</h3>
        {{ with .description }}
        <p class="card-description">{{ . }}</p>
        {{ end }} {{ with .items }}
        <div
          style="
            margin-top: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
          "
        >
          {{ range . }}
          <div
            style="
              display: flex;
              align-items: flex-start;
              gap: 0.75rem;
              padding: 0.75rem;
              border-radius: 0.5rem;
              font-size: 0.875rem;
              color: var(--color-text-light);
            "
          >
            <span
              style="
                flex-shrink: 0;
                color: #10b981;
                font-size: 1.25rem;
                line-height: 1;
              "
              >✓</span
            >
            <span style="line-height: 1.5">{{ . }}</span>
          </div>
          {{ end }}
        </div>
        {{ end }}
      </article>
      {{ end }}
    </div>
  </section>

  <!-- Work History Timeline -->
  <section style="margin-top: 4rem">
    <div class="section-header">
      <h2 class="section-title">Work History</h2>
    </div>
    <div style="max-width: 600px; margin: 2rem auto 0">
      {{ range $index, $job := site.Data.work }}
      <div
        style="display: flex; gap: 2rem; margin-bottom: 3rem; {{ if mod $index 2 }}flex-direction: row-reverse;{{ end }}"
      >
        <!-- Content -->
        <div
          style="flex: 1; {{ if mod $index 2 }}text-align: left;{{ else }}text-align: right;{{ end }}"
        >
          <h3
            style="
              font-size: 1.125rem;
              font-weight: 600;
              color: var(--color-text);
              margin-bottom: 0.5rem;
            "
          >
            {{ .company }}
          </h3>
          <p
            style="
              font-size: 0.9375rem;
              color: var(--color-text-light);
              margin-bottom: 0.25rem;
            "
          >
            {{ .title }}
          </p>
          <p
            style="
              font-size: 0.875rem;
              color: var(--color-text-lighter);
              margin: 0;
            "
          >
            {{ .startDate }} - {{ .endDate }}
          </p>
        </div>

        <!-- Timeline connector -->
        <div
          style="
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
          "
        >
          <!-- Circle -->
          <div
            style="
              width: 12px;
              height: 12px;
              border-radius: 50%;
              background-color: var(--color-text);
              border: 3px solid var(--color-bg);
              z-index: 2;
              flex-shrink: 0;
            "
          ></div>

          <!-- Vertical line -->
          {{ if ne (add $index 1) (len site.Data.work) }}
          <div
            style="
              width: 2px;
              flex: 1;
              min-height: 3rem;
              background-color: var(--color-border);
              margin-top: -2px;
            "
          ></div>
          {{ end }}
        </div>

        <!-- Spacer for alternating layout -->
        <div style="flex: 1"></div>
      </div>
      {{ end }}
    </div>
  </section>
</div>
{{ end }}
