{{ define "main" }}
<style>
  .about-hero-name {
    font-family: var(--font-serif);
    font-size: 3rem;
    font-weight: 700;
    line-height: 1.1;
    margin-bottom: 0.75rem;
  }
  .about-hero-tagline {
    font-size: 1.25rem;
    color: var(--color-text-light);
    line-height: 1.5;
  }
  .about-intro {
    display: grid;
    grid-template-columns: 4fr 3fr;
    gap: 3rem;
    align-items: start;
    margin-top: 3rem;
  }
  .about-intro-photo-wrap {
    position: sticky;
    top: 2rem;
  }
  .about-intro-photo {
    width: 100%;
    min-height: 600px;
    border-radius: 4px;
    object-fit: cover;
    object-position: center top;
  }
  @media (max-width: 768px) {
    .about-hero-name {
      font-size: 2rem;
    }
    .about-intro {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
    .about-intro-photo-wrap {
      position: static;
    }
    .about-intro-photo {
      min-height: 400px;
    }
  }
</style>
<div class="container" style="padding-top: 1.5rem">
  <!-- Name & Tagline -->
  <header style="margin-bottom: 0">
    <h1 class="about-hero-name">Miguel David</h1>
    <p class="about-hero-tagline">{{ site.Params.bio }}</p>
  </header>

  <!-- Two-column: About text + Timeline on left, Photo on right -->
  <div class="about-intro">
    <div>
      <h2 class="section-title" style="margin-bottom: 1rem">About</h2>
      <p style="line-height: 1.7; max-width: 52ch; color: var(--color-text)">
        {{ site.Params.aboutBio }}
      </p>

      <h2 class="section-title" style="margin-top: 3rem; margin-bottom: 0">
        Work History
      </h2>
      <div class="about-timeline">
        {{ range site.Data.work }} {{ $company := .company }}
        <div class="about-timeline-entry">
          <div class="about-timeline-role">{{ .title }}</div>
          <div class="about-timeline-date">
            {{ .startDate }} – {{ .endDate }}
          </div>
          <div class="about-timeline-company">
            {{ with .url }}<a href="{{ . }}" target="_blank" rel="noopener"
              >{{ $company }}</a
            >{{ else }}{{ $company }}{{ end }}
          </div>
          {{ with .description }}
          <p class="about-timeline-desc">{{ . }}</p>
          {{ end }}
        </div>
        {{ end }}
      </div>
    </div>
    <div class="about-intro-photo-wrap">
      <img
        src="/images/miguel.jpg"
        alt="Miguel David"
        class="about-intro-photo"
      />
    </div>
  </div>

  <!-- Background Section with Cards -->
  <section style="margin-top: 4rem">
    <div class="section-header">
      <h2 class="section-title">Background</h2>
    </div>
    <div class="grid">
      {{ range first 3 site.Data.aboutsections }}
      <article class="card">
        <h3 class="card-title">{{ .title }}</h3>
        {{ with .items }}
        <div
          style="
            margin-top: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
          "
        >
          {{ range . }}
          <div
            style="
              display: flex;
              align-items: flex-start;
              gap: 0.75rem;
              padding: 0.75rem;
              border-radius: 0.5rem;
              font-size: 0.875rem;
              color: var(--color-text-light);
            "
          >
            <span
              style="
                flex-shrink: 0;
                color: #10b981;
                font-size: 1.25rem;
                line-height: 1;
              "
              >✓</span
            >
            <span style="line-height: 1.5">{{ . }}</span>
          </div>
          {{ end }}
        </div>
        {{ end }}
      </article>
      {{ end }}
    </div>
  </section>

  <!-- Additional Info -->
  <section style="margin-top: 3rem">
    <div class="grid">
      {{ range after 3 site.Data.aboutsections }}
      <article class="card">
        <h3 class="card-title">{{ .title }}</h3>
        {{ with .description }}
        <p class="card-description">{{ . }}</p>
        {{ end }} {{ with .items }}
        <div
          style="
            margin-top: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
          "
        >
          {{ range . }}
          <div
            style="
              display: flex;
              align-items: flex-start;
              gap: 0.75rem;
              padding: 0.75rem;
              border-radius: 0.5rem;
              font-size: 0.875rem;
              color: var(--color-text-light);
            "
          >
            <span
              style="
                flex-shrink: 0;
                color: #10b981;
                font-size: 1.25rem;
                line-height: 1;
              "
              >✓</span
            >
            <span style="line-height: 1.5">{{ . }}</span>
          </div>
          {{ end }}
        </div>
        {{ end }}
      </article>
      {{ end }}
    </div>
  </section>

  <!-- Blog Section -->
  <section>
    <div class="section-header">
      <h2 class="section-title">Blog</h2>
      <a
        href="{{ site.Params.blogURL }}"
        class="section-link"
        target="_blank"
        rel="noopener"
      >
        More Posts <span aria-hidden="true">→</span>
      </a>
    </div>
    <div class="grid">
      {{ range site.Data.writing }}
      <article class="card">
        {{ if .url }}
        <a
          href="{{ .url }}"
          target="_blank"
          rel="noopener"
          style="text-decoration: none; color: inherit"
        >
          <h3 class="card-title">{{ .title }}</h3>
          <p class="card-description">{{ .description }}</p>
        </a>
        {{ else }}
        <h3 class="card-title">{{ .title }}</h3>
        <p class="card-description">{{ .description }}</p>
        {{ end }}
      </article>
      {{ end }}
    </div>
  </section>

  <!-- Consulting Section -->
  <section>
    <div class="section-header">
      <h2 class="section-title">Consulting</h2>
      <a href="/consulting" class="section-link">
        View past engagements <span aria-hidden="true">→</span>
      </a>
    </div>
    <div class="grid">
      {{ range site.Data.consulting.services }}
      <article class="card">
        <h3 class="card-title">{{ .title }}</h3>
        <p class="card-description">{{ .description }}</p>
      </article>
      {{ end }}
    </div>
  </section>

  <!-- Projects Section -->
  <section>
    <div class="section-header">
      <h2 class="section-title">Projects</h2>
      <a href="/projects" class="section-link">
        All Projects <span aria-hidden="true">→</span>
      </a>
    </div>
    <div class="grid">
      {{ range site.Data.projects }}
      <article class="card">
        <h3 class="card-title">{{ .title }}</h3>
        <p class="card-description">{{ .description }}</p>
        <div class="card-links">
          {{ with .github }}
          <a
            href="{{ . }}"
            aria-label="GitHub repository"
            target="_blank"
            rel="noopener"
          >
            <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path
                d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
              />
            </svg>
          </a>
          {{ end }} {{ with .website }}
          <a href="{{ . }}" aria-label="Website" target="_blank" rel="noopener">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              aria-hidden="true"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="2" y1="12" x2="22" y2="12"></line>
              <path
                d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"
              ></path>
            </svg>
          </a>
          {{ end }} {{ with .npm }}
          <a
            href="{{ . }}"
            aria-label="npm package"
            target="_blank"
            rel="noopener"
          >
            <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path
                d="M0 0v24h24V0H0zm21.333 21.333H12V9.667H9.667v11.666H2.667V2.667h18.666v18.666z"
              />
            </svg>
          </a>
          {{ end }}
        </div>
      </article>
      {{ end }}
    </div>
  </section>

  <!-- Talks Section -->
  <section id="talks">
    <div class="section-header">
      <h2 class="section-title">Talks</h2>
    </div>
    <div class="grid">
      {{ range site.Data.talks }}
      <article class="card">
        <h3 class="card-title">{{ .title }}</h3>
        {{ if .language }}
        <span
          style="
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background-color: #f3f4f6;
            color: #374151;
            border-radius: 1rem;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
          "
          >{{ .language }}</span
        >
        {{ end }}
        <p class="card-description">
          {{ if .description }}{{ .description }}{{ else }}{{ .event }}{{ end }}
        </p>
        <div class="card-links">
          {{ with .url }}
          <a
            href="{{ . }}"
            aria-label="Watch talk"
            target="_blank"
            rel="noopener"
          >
            <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path
                d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"
              />
            </svg>
          </a>
          {{ end }}
        </div>
      </article>
      {{ end }}
    </div>
  </section>
</div>
{{ end }}
